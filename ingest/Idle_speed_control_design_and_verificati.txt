IDLE
SPEED
CONTR
OL
DESIGN
AND
VERIFICA
TION
F
OR
AN
A
UTOMOTIVE
ENGINE
Andrea
Balluc
hi

,
Luca
Ben
v
en
uti
x
,
Maria
Domenica
Di
Benedetto
z
,
Gio
v
anni
Girasole
;x
,
Alb
erto
L.
Sangio
v
anni{Vincen
telli
;y

P
ARADES,
Via
San
Pantale
o,
66,
00186
R
oma,
Italy
b
al
luchi,
alb
erto@p
ar
ades.rm.cnr.it
x
Dip.
di
Informatic
a
e
Sistemistic
a,
Universit
a
di
R
oma
\L
a
Sapienza",
via
Eudossiana,
18,
00184
R
oma,
Italy
b
envenuti@dis.unir
oma.it
y
EECS
Dept.,
University
of
California
at
Berkeley,
CA
94720,
alb
erto@e
e
cs.b
erkeley.e
du
z
Dip.
di
Inge
gneria
Elettric
a,
Universit
a
del
l'A
quila,
Po
ggio
di
R
oio,
67040
L'A
quila,
Italy
dib
ene
de@ing.univaq.it
Abstract:
The
goal
of
an
idle
con
trol
for
automotiv
e
engines
is
to
main
tain
the
engine
sp
eed
within
a
giv
en
range,
robustly
with
resp
ect
to
load
torque
disturbances
acting
on
the
crankshaft.
Mean
v
alue
mo
dels
ha
v
e
b
een
used
in
the
past
to
design
idle
con
trol
algorithms.
Ho
w
ev
er,
the
b
eha
vior
of
the
torque
generation
pro
cess
and
the
dynamics
of
the
p
o
w
er{train
are
not
captured
with
enough
accuracy
to
guaran
tee
that
the
idle
con
trol
sp
ecications
as
giv
en
b
y
car
mak
ers
are
met.
W
e
use
a
cycle-accurate
h
ybrid
mo
del
to
o
v
ercome
these
obstacles.
The
complexit
y
of
the
mo
del
mak
es
the
problem
of
synthesizing
a
feedbac
k
con
trol
la
w
for
the
system
prohibitiv
e.
Heuristics
ha
v
e
b
een
widely
used
in
the
past.
In
this
pap
er,
w
e
presen
t
a
divide
and
conquer
approac
h
to
cop
e
with
this
problem.
The
system
is
decomp
osed
in
three
parts.
F
or
eac
h
part
in
isolation,
a
con
trol
la
w
is
deriv
ed
on
a
simplied
mo
del
assuming
that
the
other
parts
can
b
e
con
trolled
to
yield
appropriate
inputs.
The
o
v
erall
con
trol
strategy
is
then
applied
to
the
system
and
formal
v
erication
is
used
to
ensure
that
the
b
eha
vior
of
the
con
trolled
system
meets
the
sp
ecications.
1.
INTR
ODUCTION
The
syn
thesis
of
a
idle
con
trol
strategy
for
an
in
ternal
com
bustion
engine
is
among
the
most
c
hallenging
problems
in
engine
con
trol.
The
ob-
jectiv
e
is
main
taining
the
engine
sp
eed
as
close
as
p
ossible
to
the
v
alue
that
minimizes
fuel
consumption,
while
prev
en
ting
the
engine
from
stalling.
The
di√Ücult
y
lies
with
the
unpredictable
load
v
ariations
coming
from
the
in
termitten
t
use
of
devices
p
o
w
ered
b
y
the
engine,
suc
h
as
the
air
conditioning
system
and
the
steering
wheel
serv
o-mec
hanism.
A
surv
ey
on
dieren
t
engine
mo
dels
and
con
trol
design
metho
dologies
for
the
idle
con
trol
is
giv
en
in
Hro
v
at
and
Sun
(1997).
Both
time{domain
(e.g.
Butts
et
al.
(1999))
and
crank{angle
domain
(e.g.
Y
urk
o
vic
h
and
Simpson
(1997))
mean{v
alue
mo
dels
ha
v
e
b
een
prop
osed
in
the
literature.
More
recen
tly
,
cycle-accurate
mo
d-
els
capturing
p
erio
dic
engine
sp
eed
v
ariations
due
to
torque
uctuations,
w
ere
in
v
estigated
in
Shim
et
al.
(1996).
Multiv
ariable
con
trol
(Onder
and
Geering
(1993)),
`
1
con
trol
(Butts
et
al.
(1999)),
H
1
con
trol
(Carnev
ale
and
Mosc
hetti
(1993)),
-
syn
thesis
(Hro
v
at
and
Bo
denheimer
(1993)),
slid-
ing
mo
de
con
trol
(Kjergaard
et
al.
(1994))
and
LQ-based
optimization
(Abate
and
Di
Nunzio
(1990))
ha
v
e
b
een
applied
to
idle
con
trol
on
a
v
ariet
y
of
mo
dels.
Ho
w
ev
er,
a
fully
satisfactory
solution
has
still
to
emerge.
In
this
pap
er,
w
e
use
a
h
ybrid
mo
del
to
describ
e
the
cyclic
b
eha
vior
of
the
engine,
th
us
capturing
the
eect
of
eac
h
spark
ignition
on
the
generated
torque
and
the
in
teraction
b
et
w
een
the
discrete
torque
generation
and
the
con
tin
uous
p
o
w
er-train
and
air
dynamics.
W
e
consider
a
traditional
spark
ignition
engine
without
Gas
Direct
Injection
(GDI).
The
torque
generated
b
y
eac
h
cylinder
and
applied
to
the
engine
crankshaft
can
b
e
assumed
to
b
e
a
function
of
the
spark
ignition
time,
and
of
the
air-fuel
mixture
mass
loaded
in
the
cylinder
during
the
in
tak
e
phase.
Since
the
air-to-fuel
ratio
is
assumed
to
b
e
constan
t
(at
the
stoic
hiometric
v
alue),
then
the
mixture
mass
is
con
trolled
b
y
the
throttle
plate
p
osition
and
is
sub
ject
to
the
dynamics
of
the
cylinder
lling.
Hence,
the
a
v
ailable
con-
trols
for
the
idle
problem
are:
the
spark
ignition
time
and
the
p
osition
of
the
throttle
v
alv
e,
whic
h
regulates
the
air
ino
w
1
.
A
h
ybrid
mo
del
of
the
plan
t
is
obtained
from
the
general
mo
del
of
an
in
ternal
com
bustion
engine
presen
ted
in
refer-
ence
Balluc
hi
et
al.
(2000b),
b
y
using
nonlinear
expressions
and
mo
del
parameters
iden
tied
on
a
commercial
car
in
collab
oration
with
our
indus-
trial
partner,
Magneti
Marelli.
In
Balluc
hi
et
al.
(2000b)
and
Balluc
hi
et
al.
(2000a),
the
problem
of
main
taining
the
crankshaft
sp
eed
within
a
giv
en
range
w
as
formalized
as
a
\safet
y"
sp
ecication
for
the
h
ybrid
closed{lo
op
system
2
.
F
or
a
sim-
plied
engine
h
ybrid
mo
del,
where
some
nonlin-
ear
expressions
w
ere
linearized
and
no
actuation
dela
y
w
as
considered,
the
idle
con
trol
problem
w
as
solv
ed
b
y
computing
analytically
the
set
of
all
h
ybrid
states
for
whic
h
there
exists
a
h
ybrid
con
trol
strategy
meeting
the
sp
ecication.
The
class
of
all
\safe"
con
trollers
obtained
b
y
the
pro-
cedure
w
as
called
the
maximal
c
ontr
ol
ler.
Despite
the
simplication
of
the
mo
del,
the
expression
of
the
maximal
con
troller
obtained
in
Balluc
hi
et
al.
(2000b),
Balluc
hi
et
al.
(2000a)
is
quite
complex.
Consequen
tly
,
the
implemen
tation
of
a
particular
con
troller
extracted
from
the
maximal
con
troller
is
quite
exp
ensiv
e
in
terms
of
computing
time
and
memory
.
T
o
solv
e
the
problem
in
w
a
ys
that
are
industrially
feasible,
w
e
ha
v
e
to
tak
e
in
to
accoun
t
nonlinear-
ities,
actuation
dela
ys
and
y
et
w
e
ha
v
e
to
k
eep
1
The
eect
of
a
spark
command
on
the
torque
generation
is
\stronger"
than
the
one
of
a
throttle
plate
command,
since
air
ino
w
is
sub
ject
to
b
oth
manifold
dynamics
and
dela
y
due
to
mix
compression.
Hence,
sudden
loads
can
b
e
m
uc
h
b
etter
comp
ensated
with
spark
ignition
than
with
air
ino
w,
while
air
ino
w
can
b
e
used
to
con
trol
the
engine
in
steady
state.
2
A
safet
y
sp
ecication
requires
the
system
to
sta
y
within
a
set
of
sp
ecied
safe
states.
a
close
lo
ok
at
implemen
tation
costs.
The
ap-
proac
h
w
e
prop
ose
in
this
pap
er
is
to
select
semi-
heuristically
an
easy{to{implemen
t
con
troller
and
then
v
erify
that
it
satises
the
sp
ecications.
V
erifying
the
system
b
y
sim
ulation
and
protot
yp-
ing
is
certainly
p
ossible
but
w
e
cannot
guaran
tee
that
the
system
will
satisfy
the
sp
ecications
in
all
op
erating
conditions.
In
fact,
it
is
often
the
case
that
idle
con
trol
needs
extensiv
e
empirical
adjustmen
ts
in
the
car.
In
this
pap
er,
w
e
presen
t
a
rst
cut
for
a
metho
d-
ology
based
on
a
divide
and
conquer
approac
h
to
obtain
the
con
troller
and
formal
tec
hniques
to
guaran
tee
that
the
con
troller
is
con
tained
in
the
maximal
con
troller
and,
hence,
it
satises
the
sp
ecications.
In
our
case,
the
closed{lo
op
system
is
view
ed
as
comp
osed
of
three
sub-systems
(in
tak
e
manifold,
cylinders
and
p
o
w
er{train
sub-systems).
The
con-
trol
la
w
is
deriv
ed
b
y
simplifying
substan
tially
eac
h
of
the
sub-systems
so
that
the
h
ybrid
nature
of
the
mo
del
is
ignored
and
the
sub-systems
are
linearized
and
discretized
with
a
xed
sampling
time.
The
con
trol
la
w
is
syn
thesized
so
that
the
constrain
ts
are
satised
in
this
simplied
domain.
Then,
this
con
trol
la
w
is
applied
to
the
full-edged
system.
Of
course,
at
this
p
oin
t,
there
is
no
guar-
ante
e
that
the
con
trol
la
w
will
yield
a
closed{lo
op
system
that
satises
the
constrain
ts
ev
en
though
the
decomp
osition
and
the
corresp
onding
simpli-
cations
ha
v
e
b
een
made
so
that
w
e
do
not
w
ander
far
from
the
original
mo
del.
F
ormal
v
erication
to
ols
ha
v
e
b
een
considered
a
p
ossible
solution
to
this
problem.
Che
ckmate,
an
automatic
to
ol
for
sim
ulation
and
formal
v
erication
of
h
ybrid
systems
dev
elop
ed
at
Carnegie
Mellon
Univ
ersit
y
(see
Ch
utinan
and
Krogh
(1998,
2000))
has
b
een
tried,
but
the
complexit
y
of
the
mo
del
of
the
p
o
w
er
train
is
to
o
high
for
the
to
ol
to
complete
the
analysis
in
reasonable
time.
The
basic
idea
of
our
metho
dology
is
to
v
erify
eac
h
sub-system
in
isolation
assuming
that
the
b
eha
vior
of
the
other
sub-systems
satises
an
appropriate
set
of
condi-
tions.
Then,
the
consistency
of
the
assumptions
on
the
b
eha
viors
is
v
eried,
kno
wing
that
eac
h
of
the
sub-systems
w
orks
correctly
in
isolation.
The
sub-systems
are
the
same
as
the
ones
iden
tied
for
the
deriv
ation
of
the
con
trol
la
w.
Ho
w
ev
er,
the
b
eha
vior
of
the
closed-lo
op
p
o
w
er-train
sub-
system
is
still
to
o
complex
to
v
erify
formally
,
since
it
con
tains
the
h
ybrid
p
o
w
er{train
mo
del.
Hence,
the
h
ybrid
p
o
w
er{train
mo
del
is
decomp
osed
itself
in
the
con
tin
uous
part
and
the
discrete
part
and
v
eried
follo
wing
the
same
divide
and
conquer
approac
h.
Note
that
this
approac
h
is
a
particular
case
of
the
assume{guaran
tee
paradigm
widely
used
in
formal
v
erication.
While
our
metho
dol-
ogy
has
b
een
fully
dened,
w
e
still
ha
v
e
some
di√Ü-
culties
with
the
application
of
the
formal
v
erica-
tion
to
ols
ev
en
with
the
decomp
osed
sub-systems.
In
this
pap
er,
w
e
rep
ort
the
h
ybrid
mo
del,
the
con
trol
la
w
deriv
ation
pro
cedure
and
the
parts
of
formal
v
erication
w
e
ha
v
e
b
een
able
to
complete.
T
o
summarize,
our
metho
dology
consists
of
divid-
ing
the
o
v
erall
system
in
a
set
of
in
terconnected
sub-systems,
simplifying
the
mo
del
for
eac
h,
de-
riv
e
a
con
trol
la
w
for
the
decomp
osed,
simplied
system
and
nally
formally
v
erify
that
the
con-
trol
la
w
(p
ossibly
mo
died
to
tak
e
in
to
accoun
t
some
of
the
simplications
made)
satises
the
constrain
ts
of
the
full
edged
mo
del.
T
o
the
b
est
of
our
kno
wledge,
this
approac
h
is
no
v
el
in
h
ybrid
con
trol.
The
pap
er
is
organized
as
follo
ws:
in
Section
2,
a
description
of
the
h
ybrid
mo
del
of
the
engine
in
the
idle
region
of
op
eration
is
recalled.
In
Section
3,
an
idle
sp
eed
con
troller
is
prop
osed
and
in
Section
4,
the
v
erication
results
on
the
b
eha
vior
of
the
closed{lo
op
h
ybrid
system
are
rep
orted.
2.
PLANT
HYBRID
MODEL
In
this
section
w
e
briey
describ
e
a
h
ybrid
mo
del
of
a
4{strok
e
in
ternal
com
bustion
engine.
This
mo
del
has
b
een
obtained
from
the
h
ybrid
mo
del
presen
ted
in
reference
Balluc
hi
et
al.
(2000b),
b
y
sp
ecifying
nonlinear
expressions
and
mo
del
pa-
rameters
on
the
bases
of
the
exp
erimen
tal
data
obtained
from
a
commercial
car
at
idle
sp
eed
pro-
vided
us
b
y
the
P
o
w
er-train
Division
of
Magneti
Marelli
in
Bologna
(Italy).
Accuracy
of
this
h
y-
brid
mo
del
has
b
een
tested
on
a
dieren
t
con
trol
problem
b
y
exp
erimen
tal
v
alidation
(see
Balluc
hi
et
al.
(1999)).
The
mo
del
is
comp
osed
of
four
in
teracting
blo
c
ks,
namely
,
the
in
tak
e
manifold,
the
cylinders,
the
p
o
w
er-train
and
the
actuators,
as
sho
wn
in
g-
ure
1.
The
in
tak
e
manifold
pressure
dynamics
is
a
con
tin
uous-time
pro
cess
con
trolled
b
y
the
throttle-
v
alv
e
p
osition
.
Denoting
b
y
p
the
pressure,
manifold
dynamics
is
mo
delled
as
_
p(t)
=
a
p
(p(t))
p(t)
+
b
p
(p(t))
s((t))
(1)
where
s()
is
the
e
quivalent
thr
ottle
ar
e
a,
giv
en
in
terms
of
throttle
angle
.
P
arameters
a
p
and
b
p
dep
end
in
a
strongly
nonlinear
fashion
on
the
geometric
c
haracteristics
of
the
manifold,
on
the
ph
ysical
c
haracteristics
of
the
gas
and
atmo-
sphere,
and
on
the
curren
t
v
alue
of
the
pressure
p.
While
in
traditional
engines
the
throttle
v
alv
e
is
directly
connected
to
the
gas
p
edal,
in
electronic{
throttle
systems,
it
is
con
trolled
b
y
the
engine
con
trol
system
to
ac
hiev
e
b
etter
p
erformance.
The
dynamics
of
actuation
of
the
throttle
v
alv
e
(usu-
ally
a
DC
motor)
is
mo
delled
b
y
a
linear
rst{
order
dynamical
system:
_
(t)
=
a

(t)
+
b

V
(t)
(2)
where
V
is
the
DC
motor
input
v
oltage
whic
h
is
assumed
to
b
e
a
discrete
time
signal
pro
duced
with
a
sampling
p
erio
d

A
.
The
cylinders
blo
c
k
mo
dels
the
torque
genera-
tion.
The
torque
T
generated
b
y
eac
h
piston
at
eac
h
cycle
dep
ends
on
the
thermo
dynamics
of
the
air{fuel
mixture
com
bustion
pro
cess.
The
prole
of
T
dep
ends
on
the
phase
of
the
cylinder,
the
piston
p
osition,
the
mass
m
of
air
and
q
of
fuel
loaded
during
the
in
tak
e
phase,
and
on
the
spark
ignition
timing.
F
or
idle
sp
eed
v
alues,
the
quan
tit
y
m
of
air
loaded
in
to
eac
h
cylinder
at
the
end
of
the
in
tak
e
run
can
b
e
assumed
to
dep
end
only
on
the
v
alue
of
the
in
tak
e
manifold
pressure
at
the
in
tak
e
end
time
t
int
as
m
=
k
m
(p(t
int
))
p(t
int
)
(3)
Assuming
that
fuel
injection
is
regulated
b
y
an
 
o
 0
o
0
o

o
 
o
0
o

o
0
o
:0
0:

(')
'
Fig.
2.
Ignition
e√Üciency
function
at
lo
w
engine
sp
eed.
inner
con
trol
lo
op
that
main
tains
the
air-to-fuel
ratio
to
stoic
hiometry
,
the
prole
of
the
torque
T
generated
b
y
eac
h
cylinder
can
b
e
describ
ed
b
y
a
piecewise
constan
t
function
that
is
assumed
to
b
e
zero
ev
erywhere
except
in
the
expansion
phase
in
whic
h
T
(t)
=
G
m

(')
(4)
where
the
gain
G
is
a
constan
t
parameter,
'
is
the
spark
adv
ance
3
,
and
the
ignition
e√Üciency
function

(')
has,
in
general,
the
prole
sho
wn
in
gure
2.
3
The
spark
ignition
time
is
commonly
dened
in
terms
of
the
spark
adv
ance
that
denotes
the
dierence
b
et
w
een
the
angle
of
the
crankshaft
when
the
cylinder
is
at
the
end
of
the
compression
strok
e
and
the
one
at
the
time
of
ignition.
T
P
o
w
er-train
Crankshaft
clutch
ge
ar
Driveline
Prima
ry
Seconda
ry
Driveline

p
Intak
e
Manifold
p
spar
k
N
spar
k
1
'
N
'
1
actuato
rs
q
1
q
N
T
l
Cylinders

n
n

n
Ignition
Fig.
1.
Mo
del
of
the
engine.
When
neutral
gear
selection
is
engaged
and
the
clutc
h
is
released,
the
secondary
driv
e-line
is
dis-
connected
from
the
engine
so
that
the
p
o
w
er-
train
is
describ
ed
only
in
terms
of
the
crankshaft
sp
eed
n
and
p
osition

,
b
y
the
con
tin
uous
time
system
_
n
(t)
=
a
n
n(t)
+
b
n
(T
(t)
 T
l
(t))
(5)
_

(t)
=
k
n
n(t)
(6)
where
a
n
,
b
n
are
constan
t
parameters,
T
is
the
torque
pro
duced
b
y
the
engine,
and
T
l
represen
ts
the
load
torque
acting
on
the
crankshaft.
The
ignition
actuators
m
ust
pro
duce
the
spark
ignition
at
ev
ery
cycle,
according
to
the
curren
t
con
trol
algorithm
decision,
and
sync
hronously
with
the
crankshaft
p
osition

.
Since
the
ignition
con
trol
tak
es
time
to
actuate,
then,
it
has
to
b
e
decided
su√Ücien
tly
in
adv
ance
to
mak
e
sure
that
it
is
prop
erly
deliv
ered
to
the
plan
t.
The
spark
is
in
general
ignited
with
a
dieren
t
spark
adv
ance
at
ev
ery
cycle.
The
v
alue
of
the
spark
adv
ance
m
ust
then
b
e
computed
at
the
end
of
the
in
tak
e
strok
e,
so
that
the
ignition
subsystem
can
b
e
programmed
to
ignite
the
spark
at
the
prop
er
time.
Fig.
3.
Engine
h
ybrid
mo
del
at
idle
sp
eed.
In
conclusion,
the
b
eha
vior
of
a
four{cylinder
in-
line
engine
and
p
o
w
er-train
can
b
e
represen
ted
using
only
one
discrete
state,
as
sho
wn
in
gure
3.
In
fact,
the
engine
kinematics
are
suc
h
that,
at
an
y
time,
eac
h
cylinder
is
in
a
dieren
t
strok
e
of
the
engine
cycle
and
only
one
cylinder
is
generating
the
torque
T
.
Ev
ery
half
of
a
crankshaft
run,
i.e.,
when

=
180,
the
con
trol
la
w
f
'
()
is
computed
to
obtain
the
spark
ignition
to
b
e
applied
to
the
cylinder
that
is
en
tering
the
compression
strok
e
at
the
curren
t
dead
cen
ter.
The
throttle
v
alv
e
con
trol
f

()
is
computed
at
xed
frequency
1=
A
and
will
aect
the
amoun
t
of
air
loaded
b
y
the
cylinder
that
is
p
erforming
the
in
tak
e
strok
e
at
the
curren
t
sampling
time.
The
torque
T
 T
l
is
the
total
torque
acting
on
the
crankshaft.
3.
IDLE
SPEED
CONTR
OL
DESIGN
The
sp
ecication
for
idle
sp
eed
con
trol
is
to
main-
tain
the
crankshaft
rev
olution
sp
eed
around
a
nominal
v
alue
n
0
,
so
that
it
nev
er
exits
a
range
n
0

n,
with
n
>
0.
This
sp
ecication
has
to
b
e
ac
hiev
ed
for
an
y
v
alue
of
the
load
torque
disturbance
T
l
within
a
lo
w
er
b
ound
zero
and
an
upp
er
b
ound
T
M
l
>
0.
The
prop
osed
con
trol
is
a
state
feedbac
k
con
trol.
While
the
spark
adv
ance
feedbac
k
f
'
()
is
com-
puted
at
dead{cen
ter
times,
the
throttle
feedbac
k
f

()
is
set
at
xed{frequency
sampling
times.
Let
ft
i
g
denote
the
sequence
of
dead{cen
ter
times
and
let
t
i
denote
the
curren
t
dead{cen
ter
time.
According
to
the
engine
h
ybrid
mo
del
describ
ed
in
the
previous
section
and
sho
wn
in
gure
3,
the
spark
adv
ance
con
trol
'(t
i
),
c
hosen
at
time
t
i
,
will
aect
the
v
alue
of
the
torque
T
(t
i+1
)
that
driv
es
the
crankshaft
from
time
t
i+1
to
time
t
i+2
.
The
amoun
t
of
driving
torque
T
(t
i+1
)
dep
ends
also
on
the
v
alue
of
the
load
disturbance
T
l
(t),
acting
on
the
same
time
in
terv
al
[t
i+1
;
t
i+2
).
The
result
of
the
action
of
this
torque
will
b
e
a
giv
en
v
alue
of
crankshaft
sp
eed
n(t
i+2
)
at
time
t
i+2
.
Let
ft
A
j
g
denote
the
sequence
of
sampling
times
t
A
j
of
the
throttle
v
alv
e
con
trol
feedbac
k
f

().
The
con
trol
actions
(t
A
j
)
for
t
A
j
2
[t
i
;
t
i+1
)
driv
e
Fig.
4.
Con
trol
sc
heme.
the
manifold
dynamics
during
an
in
tak
e
strok
e
starting
from
the
dead{cen
ter
time
t
i
to
the
dead{
cen
ter
time
t
i+1
.
The
amoun
t
of
mass
loaded
b
y
the
cylinder
at
time
t
i+1
dep
ends
on
these
con
trol
actions.
Note
that
the
corresp
onding
torque
will
b
e
pro
duced
only
from
time
t
i+2
to
time
t
i+3
,
due
to
the
dela
y
in
tro
duced
b
y
the
compression
strok
e.
Due
to
the
complexit
y
of
the
system
to
con
trol,
our
strategy
is
to
decomp
ose
the
system
in
to
three
nested
sub-systems
and
to
devise
an
appropriate
con
trol
for
eac
h
of
them
in
isolation,
assuming
that
the
v
ariables
that
connect
the
sub-system
to
the
others
satisfy
an
appropriate
assumption.
The
in
terconnect
v
ariables
are
sub
ject
to
con
trol
and
the
assumption
is
c
hosen
so
that
the
con
troller
can
indeed
mak
e
them
true
when
applied
to
the
appropriate
sub-system.
Ev
en
with
this
divide
and
conquer
approac
h,
the
con
trol
problem
for
eac
h
of
the
sub-system
is
highly
complicated.
Hence,
w
e
decided
to
eliminate
most
of
the
sources
of
di√Ücult
y
so
that
an
easy{to{implemen
t
con
trol
la
w
can
b
e
deriv
ed.
Of
course,
there
is
no
a
priori
guaran
tee
that
the
con
trol
la
w
deriv
ed
with
these
heuristics
satisfy
the
constrain
ts
when
applied
to
the
h
ybrid
mo
del.
The
goal
of
the
v
erication
step
is
to
pro
v
e
that
the
strategy
pa
ys
o:
the
constrain
ts
are
indeed
satised.
3.1
Contr
ol
ler
structur
e
The
con
troller
is
comp
osed
of
three
nested
lo
ops:

an
engine
sp
eed
con
trol
in
the
outer
lo
op,
whic
h
is
resp
onsible
for
the
generation
of
torque
v
alues
the
cylinders
are
requested
to
pro
duce;

a
torque
con
trol
in
the
middle
lo
op,
whic
h
regulates
the
torque
pro
duced
b
y
the
engine
to
the
desired
v
alue
and
is
implemen
ted
b
y
the
spark
adv
ance
feedbac
k
f
'
();

a
manifold
con
trol
in
the
inner
lo
op,
whic
h
is
resp
onsible
for
regulation
of
the
mass
loaded
b
y
the
cylinders
and
implemen
ted
b
y
the
throttle
v
alv
e
feedbac
k
f

().
The
o
v
erall
con
trol
sc
heme
is
sho
wn
in
gure
4.
The
task
the
engine
sp
eed
con
troller
is
pro
vid-
ing
a
reference
torque
e
T
that,
when
pro
duced,
main
tains
the
engine
sp
eed
inside
the
sp
ecied
range
robustly
with
resp
ect
to
the
action
of
load
torque
disturbances.
A
feedbac
k
con
trol
that
ac
hiev
es
this
task
is
designed
assuming
that
the
sp
ark
advanc
e
midd
le
lo
op
wil
l
b
e
able
to
pr
o
duc
e
the
r
e
queste
d
tor
que.
The
feedbac
k
con
trol
la
w
is
designed
considering
the
sub-system
with
the
p
o
w
er{train
blo
c
k
only
.
The
con
troller
is
a
PI
con-
troller
that
maximizes
the
stabilit
y
of
the
closed
lo
op
where
the
con
tin
uous
dynamics
of
the
p
o
w
er{
train
is
discretized,
w
e
assume
that
b
et
w
een
e
T
and
T
there
is
a
simple
dela
y
.
The
torque
con
trol
has
to
regulate
the
spark
adv
ance
'
so
that
it
pro
duces
the
reference
torque
e
T
requested
b
y
the
outer
lo
op.
A
feedbac
k
con
trol
ac
hieving
this
task
is
designed
assuming
that
the
thr
ottle
valve
inner
lo
op
wil
l
b
e
able
to
pr
ovide
a
suitable
se
quenc
e
e
m
of
masses
of
air
lo
ade
d
into
the
cylinders
during
the
intake
str
okes.
This
feedbac
k
con
trol
is
designed
considering
the
sub-
system
with
the
cylinders
blo
c
k
only
.
This
con
trol
la
w
has
no
dynamics
and
pro
duces
the
spark
adv
ance
and
e
m.
In
this
t
w
o
mo
dels
the
self{lo
op
transition
is
triggered
b
y
the
dead{cen
ter
ev
en
t.
The
reference
torque
e
T
and
the
spark
adv
ance
feedbac
k
con
trol
f
'
()
are
set
at
eac
h
dead{cen
ter
for
the
cylinder
that
is
en
tering
the
compression
strok
e.
As
a
result
of
the
design
of
the
torque
con
trol
feed-
bac
k,
w
e
obtain
a
sp
ecication
for
the
manifold
con
trol
inner
lo
op.
This
sp
ecication
is
expressed
in
terms
of
a
lo
w
er
and
an
upp
er
b
ound
on
the
v
alue
e
m
of
mass
of
air
that
should
ha
v
e
b
een
loaded
in
to
the
cylinders
in
the
previous
in
tak
e
strok
e.
The
ob
jectiv
e
of
the
manifold
con
trol
is
th
us
pro-
viding
an
amoun
t
of
mass
loaded
b
y
the
cylinders
within
the
range
sp
ecied
b
y
the
middle
lo
op
torque
con
trol.
The
comp
onen
ts
of
the
plan
t
to
b
e
tak
en
in
to
consideration
are
the
in
tak
e
manifold
and
cylinder
lling
dynamics,
and
the
throttle
v
alv
e
actuator.
T
o
simplify
the
con
trol
la
w
deriv
a-
tion,
the
manifold
dynamic
is
linearized
ab
out
the
equilibrium
pressure,
i.e.,
the
co
e√Ücien
ts
of
the
dynamic
equations
are
computed
with
p(t)
=
p
eq
corresp
onding
to
n(t)
=
n
0
and
T
l
=
0.
In
addi-
tion,
the
dynamics
are
discretized
with
sampling
time

A
.
The
con
troller
is
a
discrete-time
PID.
In
this
mo
del
the
self{lo
op
transition
is
go
v
erned
b
y
a
xed
frequency
trigger
with
p
erio
d

A
.
A
t
eac
h
transition
the
throttle
v
alv
e
feedbac
k
f

()
is
computed
and
applied.
Note
that,
while
the
throt-
tle
v
alv
e
signal
is
triggered
b
y
a
xed
frequency
sampling,
the
sp
ecication
for
the
in
tak
e
manifold
con
trol
is
giv
en
in
terms
of
the
loaded
air
masses
whose
time
base
is
the
sequence
of
dead{cen
ter
times.
This
async
hronism
b
et
w
een
the
feedbac
k
lo
op
and
the
sp
ecications
will
b
e
considered
in
the
v
erication
of
the
p
erformances
of
the
closed
lo
op
system.
3.2
The
design
of
the
fe
e
db
ack
c
ontr
ol
lo
ops
3.2.1.
Sp
e
e
d
and
tor
que
c
ontr
ol
lo
ops.
F
ollo
wing
the
ideas
presen
ted
in
the
previous
section,
w
e
deriv
e
the
con
trol
la
ws
b
y
simplifying
the
h
ybrid
mo
del.
In
this
section
w
e
detail
the
simplications
and
sho
w
ho
w
the
con
trol
la
w
is
deriv
ed.
The
h
ybrid
nature
of
torque
generation
pro
cess
is
appro
ximated
b
y
means
of
a
xed
frequency
n
0
=30
dicrete
time
pro
cess
and
the
driv
eline
dynamics
is
discretized
with
sampling
p
erio
d

0
so
that
it
reduces
to:
n(k

0
+

0
)
=
a
d
n
n(k

0
)
+
b
d
n
(
T
(k

0
)
 T
l
(k

0
))
with
a
d
n
=
e
a
n

0
and
b
d
n
=
(e
a
n

0
)
 1)(b
n
=a
n
).
Moreo
v
er,
from
the
assumption
that
the
middle
lo
op
will
b
e
able
to
pro
duce
the
requested
torque
it
follo
ws
that
T
(k

0
)
=
e
T
(k

0
 
0
)
(7)
where
T
(k

0
)
is
the
driving
torque
during
the
expansion
phase
from
time
k

0
to
k

0
+

0
and
e
T
(k

0
 
0
)
is
the
reference
torque
computed
at
the
end
of
the
in
tak
e
phase
b
y
the
sp
eed
con
troller.
This
torque
dep
ends
on
the
mass
of
air
m(k

0
 
0
)
=
k
m
(p(k

0
 
0
))
p(k

0
 
0
)
loaded
in
the
cylinder
en
tering
the
compression
phase
and
on
the
spark
adv
ance
'(k

0
 
0
)
that
will
b
e
applied
to
the
same
cylinder.
W
e
design
a
feedbac
k
con
trol
suc
h
that
the
torque
e
T
(k

0
 
0
)
em
ulates
that
of
a
PI
con
troller,
giv
en
b
y:
e
T
(z
)
=
K
p

1
+

0
z

I
(z
 1)


n(z
)
 n
0
z
z
 1

(8)
This
con
troller
is
able
to
asymptotically
comp
en-
sate
constan
t
torque
disturbances.
The
gain
K
p
and
the
time
constan
t

I
are
selected
as
to
stabi-
lize
the
system
dynamics
n(k

0
+

0
)
=
a
d
n
n(k

0
)
+
b
d
n
e
T
(k

0
 
0
)
(9)
in
the
absence
of
the
disturbance
torque
T
l
(k

0
).
The
spark
adv
ance
is
then
computed
b
y
simply
in
v
erting
equation
e
T
(k

0
 
0
)
=
G
m(k

0
 
0
))

(
'(k

0
 
0
))
taking
in
to
accoun
t
the
saturation
'
2
['
min
,
'
max
].
If
the
computed
spark
adv
ance
is
not
saturated,
then
it
will
b
e
able
to
pro
duce
the
desired
torque,
as
in
(7),
on
the
basis
of
the
mass
of
air
loaded
at
time
k

0
 
0
.
F
urthermore,
the
middle{lo
op
con
trol
has
to
gen-
erate
the
sequence
of
reference
v
alues
e
m(k

0
 
0
)
that
is
giv
en
as
input
to
the
manifold
con
trol
inner
lo
op.
This
reference
v
alue,
when
pro
duced,
will
aect
the
torque
generated
in
the
time
in
terv
al
[k

0
+

0
;
k

0
+
2
0
]
and
is
computed
b
y
simply
in
v
erting
equation
e
T
(k

0
 
0
)
=
G
m(k

0
 
0
)

('
0
)
where
the
parameter
'
0
,
with
'
min
<
'
0
<
'
max
,
is
the
nominal
spark
adv
ance
to
b
e
used
during
idle
con
trol.
The
tuning
of
the
con
trol
parameter
'
0
to
v
alue
smaller
than
'
max
allo
ws
some
degree
of
reacting
to
fast
p
ositiv
e
torque
requests
using
the
spark
adv
ance.
Similarly
,
setting
'
0
to
a
v
alue
greater
than
'
min
,
allo
ws
to
react
to
fast
negativ
e
torque
requests.
Note
that
the
mass
of
air
loaded
in
to
the
cylinder
at
time
k

0
 
0
,
i.e.,
at
the
end
of
the
in
tak
e
phase,
dep
ends
on
the
throttle
con
trol
applied
on
the
time
in
terv
al
[k

0
 2
0
;
k

0
 
0
].
3.2.2.
Intake
manifold
c
ontr
ol
lo
op.
The
ob
jec-
tiv
e
of
the
in
tak
e
manifold
con
trol
is
making
the
cylinders
load
the
amoun
t
of
mass
e
m
sp
ecied
b
y
the
torque
con
trol.
F
or
the
design
of
the
in
tak
e
manifold
con
trol,
w
e
assume
that
the
reference
signal
e
m
is
pro
duced
at
a
xed
frequency
1=
0
and

A
is
suc
h
that

0
=
N
A

A
for
an
appropriate
in
teger
N
A
.
The
robustness
of
the
closed{lo
op
system
with
resp
ect
to
this
assumption
will
b
e
c
hec
k
ed
in
the
v
erication
phase.
The
in
tak
e
manifold
and
cylinder
lling
dynamics
are
discretized
with
sampling
p
erio
d
equal
to
the
throttle
v
alv
e
con
trol
sampling
time

A
.
Hence,
a
PID
con
troller
that
pro
duces
con
v
ergence
of
the
manifold
pressure
p
to
the
target
setp
oin
t
~
p
(whic
h
is
a
piecewise
constan
t
v
alue
of
p
erio
d

0
obtained
from
e
m
b
y
in
v
erting
equation
(3))
is
used
for
the
throttle
piecewise{constan
t
con
trol
feedbac
k
f

():
V
(z
)
=
^
K
p

1
+

A
z
^

I
(z
 1)
+
^

D
(z
 1)

A
z

(p(z
)
 ~
p
(z
))
(10)
Sim
ulation
results
are
rep
orted
in
gure
5.
The
crankshaft
rev
olution
sp
eed
has
to
b
e
main
tained
around
the
nominal
v
alue
n
0
=
800
rpm
with
maxim
um
excursion
of
50
rpm
so
that

0
=
30=n
0
=
37:5
msec.
The
v
alue
of
the
p
o
w
ertrain
parameters
are
a
n
=
 1:531
and
b
n
=
95:49;
those
of
the
in
tak
e
manifold
are:

A
=

0
=4,
a
p
=
 20:94,
b
p
=
1821,
a

=
 10:3,
b

=
9:8
and
'
0
=
15.
Finally
,
the
PID
con
trollers
are
dened
b
y
the
follo
wing
time
constan
ts
and
gains:
K
p
=
0:0781,

I
=
234:5
msec,
^
K
p
=
0:0613,
^

I
=
135:7
msec,
^

D
=
29:5
msec.
Figure
5
sho
ws
T
3
3.2
3.4
3.6
3.8
4
4.2
4.4
4.6
4.8
5
12
13
14
15
16
17
18
19
n
3
3.2
3.4
3.6
3.8
4
4.2
4.4
4.6
4.8
5
750
760
770
780
790
800
810
'
3
3.2
3.4
3.6
3.8
4
4.2
4.4
4.6
4.8
5
‚àí17
‚àí16
‚àí15
‚àí14
‚àí13
‚àí12
‚àí11
‚àí10
‚àí9
‚àí8
‚àí7

3
3.2
3.4
3.6
3.8
4
4.2
4.4
4.6
4.8
5
4
4.2
4.4
4.6
4.8
5
5.2
5.4
5.6
V
3
3.2
3.4
3.6
3.8
4
4.2
4.4
4.6
4.8
5
4
4.5
5
5.5
6
6.5
7
7.5
8
Fig.
5.
Sim
ulation
results.
relev
an
t
signals
in
a
sim
ulation
of
the
closed{lo
op
system,
obtained
with
a
load
torque
T
l
that
is
a
step
of
amplitude
5
Nm
applied
at
time
t
=
5
sec.
4.
CLOSED{LOOP
SYSTEM
BEHA
VIOR
VERIFICA
TION
In
this
section,
w
e
need
to
sho
w
that
the
h
ybrid
feedbac
ks
describ
ed
in
sections
3.2.2,
3.2.1
and
applied
to
the
full
h
ybrid
system
mo
del
describ
ed
in
section
2,
ac
hiev
e
the
task
of
main
taining
the
engine
sp
eed
within
the
sp
ecied
range,
for
an
y
action
of
the
load
disturbance,
pro
vided
that
the
initial
condition
of
the
h
ybrid
system
b
elongs
to
a
sp
ecied
set.
In
other
w
ords,
w
e
need
to
sho
w
that
a
giv
en
set
of
initial
conditions
is
a
robust
in
v
arian
t
set
for
the
closed
lo
op
system
obtained
b
y
applying
the
prop
osed
idle
sp
eed
con
trol
to
the
h
ybrid
engine
mo
del.
This
result
guaran
tees
that,
if
the
h
ybrid
system
state
is
steered
inside
this
set,
then
the
prop
osed
idle
feedbac
k
con
trol
can
b
e
activ
ated
and
the
idle
sp
eed
sp
ecication
will
b
e
met
under
an
y
load
disturbance.
Note
that
the
set
is
not
a
maximal
in
v
arian
t
set,
but
a
subset.
In
Balluc
hi
et
al.
(2000a),
the
maximal
robust
in
v
arian
t
set
for
an
engine
at
idle
sp
eed
w
as
com-
puted
analytically
for
a
simplied
engine
h
ybrid
mo
del,
where
the
nonlinear
expressions
w
ere
lin-
earized
and
no
actuation
dela
ys
w
ere
considered.
The
main
ob
jectiv
e
there
w
as
to
establish
the
b
est
p
erformances
ac
hiev
able
b
y
a
giv
en
engine
without
adding
an
y
detail
and/or
constrain
ts
on
the
idle
sp
eed
con
troller.
The
appro
ximated
linear
expressions
w
ere
used
to
mak
e
the
analytical
com-
putation
feasible.
In
that
case,
the
largest
set
of
initial
conditions
for
whic
h
at
least
an
idle
sp
eed
con
troller
exists
w
as
deriv
ed.
In
this
pap
er,
w
e
added
details
and
constrain
ts
on
the
con
troller,
sp
ecifying
actuator
dela
ys
and
dynamics
in
the
h
ybrid
mo
del
of
the
engine.
Hence,
the
v
erication
task
is
more
complex
and
cannot
b
e
carried
out
analytically
.
W
e
need
to
sho
w
that,
from
a
giv
en
set
of
initial
conditions,
the
con
troller
syn
thesized
in
the
previous
section
ac
hiev
es
the
idle
sp
eed
sp
ecication.
Due
to
the
added
details
on
actuations
c
haracteristics
and
due
to
the
c
hoice
of
a
particular
con
troller,
this
set
of
initial
conditions
will
b
e
necessarily
con
tained
in
the
maximal
robust
in
v
arian
t
set
for
idle
sp
eed
con
trol
computed
for
the
nonlinear
mo
del.
The
v
erication
is
carried
out
using
existing
au-
tomatic
to
ols
(Matlab
and
Chec
kmate).
Ho
w-
ev
er,
in
tro
ducing
the
en
tire
closed{lo
op
system
in
the
automatic
to
ols
is
prohibitiv
ely
complex.
Hence,
w
e
decided
to
apply
an
assume{guaran
tee
paradigm
to
v
erify
the
correctness
of
the
con-
troller.
The
v
erication
is
based
on
the
same
decomp
osition
of
the
system
used
in
the
design
of
the
feedbac
k
con
trols.
Ev
en
with
the
assume{
guaran
tee
approac
h
w
e
ha
v
e
not
b
een
able
to
com-
plete
the
formal
v
erication
pro
cess.
W
e
rep
ort
in
this
section
the
basic
ideas
and
the
partial
results
w
e
ha
v
e
b
een
able
to
obtain.
As
in
the
case
of
the
con
trol
syn
thesis
pro
cess,
w
e
consider
rst
the
p
o
w
ertrain
closed{lo
op
system,
then
the
cylinders
closed{lo
op
system,
and
nally
the
in
tak
e
manifold
closed{lo
op
system.
Applying
the
assume{guaran
tee
paradigm,
the
correctness
of
the
b
eha
vior
of
the
sp
eed
con
trol
outer
lo
op
is
v
eried
assuming
that
the
tor
que
c
on-
tr
ol
midd
le
lo
op
wil
l
pr
o
duc
e
the
r
e
queste
d
values
of
tor
que
with
a
single
phase
delay.
First,
w
e
v
erify
that,
if,
at
eac
h
dead
cen
ter,
the
conguration
(n;
T
)
is
inside
the
set
P
represen
ted
in
gure
6,
then
the
con
tin
uous
ev
olution
of
n
will
satisfy
the
system
sp
ecication
n
2
[n
0
 ;
n
0
+
],
during
the
curren
t
strok
e
and
under
an
y
action
of
the
torque
disturbance
T
l
.
The
set
P
is
obtained
b
y
bac
kw
ard
in
tegration
of
equations
(5)-(6)
o
v
er
a
strok
e
for
T
l
2
[0;
5]N
m.
Figure
6
sho
ws
the
set
P
.
0
2
4
6
8
10
12
14
16
18
20
750
760
770
780
790
800
810
820
830
840
850
P
n
T
Fig.
6.
The
set
P
.
Hence,
the
sp
eed
con
troller
pro
duces
a
correct
b
eha
vior
if,
for
an
y
ev
olution
of
the
closed{lo
op
system,
at
eac
h
dead
cen
ter
the
engine
torque
T
and
the
engine
sp
eed
n
b
elong
to
the
set
P
.
In
order
to
v
erify
this,
w
e
assume
that
the
torque
con
trol
middle
lo
op
will
pro
duce
the
requested
v
alues
of
torque
with
a
single
phase
dela
y
.
Under
this
assumption,
if
the
initial
conguration
of
the
PI
con
troller
z
I
is
c
hosen
suc
h
that
the
congura-
tion
(n
k
;
T
k
;
z
I
k
)
of
the
closed{lo
op
system
4
n
k
+1
=
e
a
n
t
?
n
k
+
b
n
a
n
(e
a
n
t
?
 1)
(T
k
 T
l
)
(11)
T
k
+1
=
e
T
k
=
z
I
k
 K
P

I
+

0

I
(n
k
 n
0
)
(12)
z
I
k
+1
=
z
I
k
 K
P

0

I
(n
k
 n
0
)
(13)
b
elongs
to
the
maximal
in
v
arian
t
set
M
P
con-
tained
in
P

R,
then
the
correct
b
eha
vior
of
4
The
index
k
refers
to
the
k
-th
dead
cen
ter.
the
sp
eed
con
troller
is
v
eried.
In
(11),
t
?
de-
notes
the
dead-cen
ter
time
that
is
mo
deled
as
a
b
ounded
unkno
wn
disturbance
in
the
range
[1=(n
0
+
);
1=(n
0
 )].
Then,
to
complete
the
v
erication
of
the
sp
eed
con
troller
w
e
ha
v
e
to
com-
pute
a
robust
in
v
arian
t
set
for
dynamics
(11),(12)
and
(13),
con
tained
in
M
P
.
W
e
are
curren
tly
in-
v
estigan
ting
the
use
of
p
olyhedral
appro
ximations
of
the
reac
h
sets
to
carry
out
this
computation.
Notice
that,
since
the
assumed
b
eha
vior
for
the
torque
closed{lo
op
sub-system
is
that
of
pro
duc-
ing
the
desired
torque
~
T
with
a
single
phase
dela
y
,
the
sp
ecication
to
b
e
v
eried
for
the
middle
sub-
system
do
es
not
dep
end
on
the
ev
olution
of
the
outer
con
trol
lo
op.
This
allo
ws
us
to
formally
v
erify
that
if
the
in
tak
e
manifold
con
trol
inner
lo
op
will
exhibit
an
input-output
b
eha
vior
that
is
con
tained
in
the
stream
depicted
in
gure
7,
in
terms
of
requested
mass
e
m(k
 1)
and
loaded
mass
during
the
in
tak
e
strok
es
m(k
),
then
the
torque
con
trol
middle
lo
op
is
able
to
pro
duce
the
requested
b
eha
vior
b
et
w
een
the
desired
torque
~
T
and
the
engine
torque
T
.
Finally
,
in
the
last
step
of
the
assume-guaran
tee
approac
h,
w
e
will
consider
the
v
erication
of
the
in
tak
e
manifold
con
trol
inner
lo
op
to
sho
w
that
the
b
eha
vior
of
the
throttle
v
alv
e
con
trol
is
cor-
rect,
in
the
sense
that
it
pro
vides
the
assumed
b
eha
vior
sp
ecied
in
gure
7.
An
ob
jectiv
e
of
this
v
erication
is
to
sho
w
that
the
discrete
represen
ta-
tion
of
the
pressure
dynamics,
used
in
the
design
of
the
throttle
v
alv
e
con
trol,
mo
dels
su√Ücien
tly
w
ell
the
con
tin
uous
ev
olution
of
the
manifold
pres-
sure.
A
second
issue
is
v
erifying
that
the
in
terac-
tion
b
et
w
een
the
t
w
o
lo
ops
with
dieren
t
triggers
(the
throttle
con
trol
running
at
xed
frequency
1=
A
and
torque
con
trol
sync
hronized
with
the
engine
dead
cen
ters)
pro
duces
a
correct
b
eha
vior.
W
e
will
v
erify
the
correct
b
eha
vior
of
the
in
tak
e
manifold
inner
lo
op
using
existing
automatic
to
ols
(Matlab
and
Chec
kmate).
5.
CONCLUSIONS
The
idle
sp
eed
con
trol
problem
has
b
een
formal-
ized
as
a
safet
y
sp
ecication
for
a
h
ybrid
mo
del
of
the
engine
and
the
p
o
w
er-train.
The
h
ybrid
mo
del
describ
es
the
in
tak
e
manifold
and
cylinder
lling
dynamics,
the
torque
generation
pro
cess
and
the
p
o
w
er{train,
as
w
ell
as
throttle
and
spark
ignition
actuators.
An
idle
sp
eed
con
troller
has
b
een
designed
exploiting
the
decomp
osition
of
the
system
in
three
comp
onen
ts:
the
engine
sp
eed
con
troller,
the
torque
con
troller
and
the
in
tak
e
manifold
con
troller.
F
or
the
design
of
eac
h
con-
troller,
a
simplied
mo
del
of
the
plan
t
is
used.
Eac
h
con
troller
is
syn
thesized
assuming
that
the
~
m(t
i 1
)
100
150
200
250
300
350
400
450
500
0
100
200
300
400
500
600
m(t
i
)
Fig.
7.
Assumed
b
eha
vior
for
the
in
tak
e
manifold
closed{lo
op
subsystem.
other
sub-systems
can
b
e
con
trolled
to
giv
e
the
appropriate
input-output
b
eha
vior.
The
con
trol
la
w
so
obtained
is
then
applied
to
the
h
ybrid
system
mo
deled
in
its
en
tiret
y
and
sim
ulation
results
are
obtained.
Since
there
is
no
guaran
tee
that
the
b
eha
vior
of
the
closed{lo
op
system
will
satisfy
the
sp
ecications,
w
e
apply
formal
v
erication
tec
hniques
to
demonstrate
that
the
con
trol
la
w
do
es
indeed
meet
the
constrain
ts.
Since
formal
v
erication
is
a
v
ery
complex
task,
w
e
applied
an
assume{guaran
tee
approac
h
that
views
the
system
as
comp
osed
of
the
three
sub-
systems
for
whic
h
the
con
trol
la
w
w
as
deriv
ed.
The
assume{guaran
tee
principle
allo
ws
us
to
ob-
tain
a
set
of
formal
v
erication
problems
that
are
solv
able
within
the
domain
of
presen
t
formal
v
erication
to
ols.
References
M.
Abate
and
V.
Di
Nunzio.
Idle
sp
eed
con
trol
using
optimal
regulation.
T
ec
hnical
Rep
ort
905008,
SAE,
1990.
A.
Balluc
hi,
L.
Ben
v
en
uti,
M.
D.
Di
Benedetto,
G.
M.
Miconi,
U.
P
ozzi,
T.
Villa,
H.
W
ong-
T
oi,
and
A.
L.
Sangio
v
anni-Vincen
telli.
Max-
imal
safe
set
computation
for
idle
sp
eed
con-
trol
of
an
automotiv
e
engine.
In
Nancy
Lync
h
and
Bruce
H.
Krogh,
editors,
Hybrid
Systems:
Computation
and
Contr
ol,
v
olume
1790
of
L
e
c-
tur
e
Notes
in
Computer
Scienc
e,
pages
32{44.
Springer-V
erlag,
New
Y
ork,
U.S.A.,
2000a.
A.
Balluc
hi,
L.
Ben
v
en
uti,
M.
D.
Di
Benedetto,
C.
Pinello,
and
A.
L.
Sangio
v
anni-Vincen
telli.
Automotiv
e
engine
con
trol
and
h
ybrid
systems:
Challenges
and
opp
ortunities.
Pr
o
c
e
e
dings
of
the
IEEE,
88,
"Sp
ecial
Issue
on
Hybrid
Sys-
tems"
(in
vited
pap
er)(7):888{912,
July
2000b.
A.
Balluc
hi,
M.
D.
Di
Benedetto,
C.
Pinello,
C.
Rossi,
and
A.
L.
Sangio
v
anni-Vincen
telli.
Hybrid
con
trol
in
automotiv
e
applications:
the
cut-o
con
trol.
A
utomatic
a,
35,
(in
vited
pap
er)
Sp
ecial
Issue
on
Hybrid
Systems(3):519{535,
Marc
h
1999.
K.
R.
Butts,
N.
Siv
ashank
ar,
and
J.
Sun.
Appli-
cation
of
`
1
optimal
con
trol
to
the
engine
idle
sp
eed
con
trol
problem.
IEEE
T
r
ans.
on
Contr
ol
Systems
T
e
chnolo
gy,
7(2):258{270,
Marc
h
1999.
C.
Carnev
ale
and
A.
Mosc
hetti.
Idle
sp
eed
con
trol
with
H
1
tec
hnique.
T
ec
hnical
Rep
ort
930770,
SAE,
1993.
A.
Ch
utinan
and
B.H.
Krogh.
Computing
p
olyhe-
dral
appro
ximations
to
dynamic
o
w
pip
es.
In
Hybrid
Systems
V,
Lecture
Notes
in
Computer
Science.
Springer-V
erlag,
New
Y
ork,
U.S.A.,
1998.
A.
Ch
utinan
and
B.H.
Krogh.
Appro
ximate
quo-
tien
t
transition
systems
for
h
ybrid
systems.
In
Pr
o
c.
of
the
2000
A
meric
an
Contr
ol
Confer
enc
e,
Chicago,
IL,
June
2000.
D.
Hro
v
at
and
B.
Bo
denheimer.
Robust
auto-
motiv
e
idle
sp
eed
con
trol
design
based
on
-
syn
thesis.
In
Pr
o
c.
IEEE
A
meric
an
Contr
ol
Confer
enc
e,
pages
1778{1783,
S.
F
rancisco,
CA,
1993.
D.
Hro
v
at
and
J.
Sun.
Mo
dels
and
con
trol
metho
dologies
for
IC
engine
idle
sp
eed
con
trol
design.
Contr
ol
Engine
ering
Pr
actic
e,
5(8),
Au-
gust
1997.
L.
Kjergaard,
S.
Nielsen,
T.
V
esterholm,
and
E.
Hendric
ks.
Adv
anced
nonlinear
engine
idle
sp
eed
con
trol
systems.
T
ec
hnical
Rep
ort
940974,
SAE,
1994.
C.
H.
Onder
and
H.
P
.
Geering.
Mo
del-based
m
ultiv
ariable
sp
eed
and
air-to-fuel
ratio
con
trol
of
a
SI
engine.
T
ec
hnical
Rep
ort
930859,
SAE,
1993.
D.
Shim,
J.
P
ark,
P
.
P
.
Khargonek
ar,
and
W.
B.
Ribb
ens.
Reducing
automotiv
e
engine
sp
eed
uctuation
at
idle.
IEEE
T
r
ans.
on
Contr
ol
Systems
T
e
chnolo
gy,
4(4):404{410,
July
1996.
Stephen
Y
urk
o
vic
h
and
Melinda
Simpson.
Crank-
angle
domain
mo
deling
and
con
trol
for
idle
sp
eed.
SAE
Journal
of
Engines,
106(970027):
34{41,
1997.
